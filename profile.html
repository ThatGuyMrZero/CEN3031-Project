
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="stylesheet" href="styles.css">
</head>


<style>
    #profileMenu {
        display: flex;
        flex-flow: column nowrap;
    }

    #colorOptions {
        display: flex;
        flex-flow: row nowrap;
        justify-content: center;
    }

    #colorSelection {
        display: flex;
        flex-flow: column nowrap;
    }

    #colorMenu {
        display: flex;
        flex-flow: row wrap;
        justify-content: center;
    }

    #colorMenu button {
        margin: 10px 5px;
    }

    /* Dropdown Content (Hidden by Default) */
    .dropdown-content {
        display: none;
        position: absolute;
        background-color: #808080;
        min-width: 160px;
        box-shadow: 8px 16px #00000033;
        z-index: 1;
    }

    /* Links inside the dropdown */
    .dropdown-content p {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
    }

    /* Change color of dropdown links on hover */
    .dropdown-content button:hover {
        background-color: #a8a8a8;
        cursor: pointer;
    }

    /* Show the dropdown menu on hover */
    .dropdown:hover .dropdown-content {
        display: block;
    }

</style>


<body>

<div class="section">

    <div id="profileMenu" class="section">

        <div id="picture-selector">

        </div>

        <div id="colorOptions">

            <div class="dropdown">
                <button id="dropdown-header" class="button">Background Type</button>
                <div class="dropdown-content">
                    <button onclick="pickType('solid')">Solid</button>
                    <button onclick="pickType('linear-gradient')">Linear Gradient</button>
                    <button onclick="pickType('radial-gradient')">Radial Gradient</button>
                    <button onclick="pickType('repeating-linear-gradient')">Repeating Linear Gradient</button>
                </div>
            </div>

            <div id="colorSelection" class="menu">

                <h3>Include:</h3>
                <div class="colorItem">
                    <label for="color-primary">Primary color: </label>
                    <input type="color" value="#808890" id="color-primary">
                </div>
                <br>
                <div class="colorItem">
                    <label for="color-secondary">Secondary color: </label>
                    <input type="color" value="#908880" id="color-secondary">
                </div>
                <br>
                <div class="colorItem">
                    <label for="color-tertiary">Tertiary color: </label>
                    <input type="color" value="#38a050" id="color-tertiary">
                </div>

                <button onclick="currentColors()">Current Colors</button>

            </div>

            <div class="angle-selector">
                <label for="angle">Angle:</label>
                <input type="range" id="angle" name="angle" min="0" max="360" />
                <output id="angle-output"></output>
            </div>

        </div>

        <br>

            <div id="colorMenu" >
                <button onclick="setColors()">Set Colors</button>
                <button onclick="colorDefault()">Default</button>
            </div>


    </div>

    <div class="section">
        <h3>Back to:</h3>
        <button onclick="window.location.href='/'">Menu</button>
        <button onclick=playGame()>Game</button>
    </div>

</div>

</body>

<script src="script.js"></script>

<script>

    function pickType(type='linear-gradient') {
        sessionStorage.setItem('background-type', type);

        sessionStorage.setItem('keep-colors', 'true');
        window.location.reload();
    }

    function currentColors() {

        document.querySelector("#color-primary").value = sessionStorage.getItem('color-primary');
        document.querySelector("#color-secondary").value = sessionStorage.getItem('color-secondary');
        document.querySelector("#color-tertiary").value = sessionStorage.getItem('color-tertiary');

    }

    function setColors() {

        sessionStorage.setItem('default', 'false');

        //const primary_bool = document.getElementById('color-primary-checkbox').checked
        let primary = document.getElementById('color-primary').value;
        sessionStorage.setItem('color-primary', primary);

        //const secondary_bool = document.getElementById('color-secondary-checkbox').checked
        let secondary = document.getElementById('color-secondary').value;
        sessionStorage.setItem('color-secondary', secondary);

        //const tertiary_bool = document.getElementById('color-tertiary-checkbox').checked;
        let tertiary = document.getElementById('color-tertiary').value;
        sessionStorage.setItem('color-tertiary', tertiary);

        let angle = document.getElementById('angle').value;
        sessionStorage.setItem('angle', angle);

        let type = sessionStorage.getItem('background-type');
        if (undefined === type) {
            type = 'solid';
            sessionStorage.setItem('background-type', type);
        }

        location.replace(location.href);
    }

    function colorDefault() {
        document.body.style.backgroundImage = "none";
        sessionStorage.setItem('default', 'true');

        document.querySelector(".angle-selector").value = 180;
        sessionStorage.setItem('angle', '180');

        sessionStorage.setItem('background-type', 'solid');

        location.reload();
    }


    let backgroundType = sessionStorage.getItem("background-type");
    if (!backgroundType) {
        backgroundType = 'solid';
    }
    document.querySelector("#dropdown-header").innerHTML = "Background Type:<br>" + backgroundType;


    const primary = document.querySelector('#color-primary');
    const secondary = document.querySelector('#color-secondary');
    const tertiary = document.querySelector('#color-tertiary');

    const oldColors = sessionStorage.getItem('keep-colors');

    if ( !!sessionStorage.getItem('default') && !oldColors ) {
        primary.value = sessionStorage.getItem('color-primary');
        secondary.value = sessionStorage.getItem('color-secondary');
        tertiary.value = sessionStorage.getItem('color-tertiary');
    }
    else if ( !!oldColors ) {
        primary.value = sessionStorage.getItem('temp-primary');
        secondary.value = sessionStorage.getItem('temp-secondary');
        tertiary.value = sessionStorage.getItem('temp-tertiary');
    }

    primary.addEventListener('input', () => {
        sessionStorage.setItem('temp-primary', primary.value);
    });
    secondary.addEventListener('input', () => {
        sessionStorage.setItem('temp-secondary', secondary.value);
    });
    tertiary.addEventListener('input', () => {
        sessionStorage.setItem('temp-tertiary', tertiary.value);
    });



    const angleInput = document.querySelector("#angle");

    const storedAngle = sessionStorage.getItem
    if (storedAngle) {
        angleInput.value = sessionStorage.getItem('angle');
    }

    const angleOutput = document.querySelector("#angle-output");

    angleOutput.textContent = angleInput.value;

    angleInput.addEventListener("input", (event) => {
        angleOutput.textContent = event.target.value;
    });

</script>


</html>